
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Writing a “String to Number” Function in C - code/caffeine</title>
  <meta name="author" content="Matt Thomas">

  
  <meta name="description" content="Years ago I was in a job interview where the employer took me to a whiteboard and asked me to implement atoi() in C. They also asked me to talk about &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://codecaffeine.com/blog/2011/12/17/writing-a-string-to-number-function-in-c">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="code/caffeine" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!-- Typekit -->
<script type="text/javascript" src="//use.typekit.net/cot8fap.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700' rel='stylesheet' type='text/css'>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">code/caffeine</a></h1>
  
    <h2>Matt Thomas, iOS Developer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:codecaffeine.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/resume/">Résumé</a></li>
  <li><a href="/contact/">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Writing a “String to Number” Function in C</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-12-17T22:57:00-05:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>10:57 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Years ago I was in a job interview where the employer took me to a whiteboard and asked me to implement <code>atoi()</code> in C. They also asked me to talk about any issues with my implementation. While there is hardly any reason to implement <code>atoi()</code> yourself nowadays, sometimes it&rsquo;s good practice to try it anyway.</p>

<!--more-->


<h2>C Standard Library interface</h2>

<p>First lets looks at the function definition:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>man atoi
</span><span class='line'>atoi -- convert ASCII string to integer
</span><span class='line'>int atoi<span class="o">(</span>const char *str<span class="o">)</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The C standard library method <code>atoi()</code> takes in a string (character array) and returns a number. You&rsquo;ll actually notice that the man page deprecated <code>atoi()</code> in favor of <code>strtol()</code> which uses long instead of int. Our implementation will use a long instead of an int as well:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="kt">long</span> <span class="nf">cc_stringToNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">string</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Number Theory</h2>

<p>Before we start digging into code, what do we actually mean when we write out a number? Well according to Wikipedia&rsquo;s <a href="http://en.wikipedia.org/wiki/Number">entry on numbers</a>:</p>

<blockquote><p>In this base ten system, the rightmost digit of a natural number has a place value of one, and every other digit has a place value ten times that of the place value of the digit to its right.</p></blockquote>


<p>Lets look at the numbers 7, 42, and 365 to see how this would work:</p>

<p><strong>7</strong> = 7×1 = 7×10<sup>0</sup></p>

<p><strong>42</strong> = 4×10 + 2×1 = 4×10<sup>1</sup> + 2×10<sup>0</sup></p>

<p><strong>365</strong> = 3×100 + 6×10 + 5×1 = 3×10<sup>2</sup> + 6×10<sup>1</sup> + 5×10<sup>0</sup></p>

<h3>General Rule</h3>

<p>Each character in the number string can be represented by <strong> <em>n</em>×10<sup><em>p</em></sup></strong> where <strong><em>n</em></strong> is the <strong>numerical value</strong> of the character and <strong><em>p</em></strong> is the <strong>place value</strong> of the character decreasing from <em>stringLength-1</em> to <em>0</em></p>

<h4>Getting the Numerical Value for a Character</h4>

<p>According to the <a href="http://en.wikipedia.org/wiki/ASCII">ASCII Table</a>, numbers 0–9 have the values 48–57 respectively. We can get the numerical position by taking the ASCII value and subtracting 48.</p>

<h4>Getting the Place Value of the Character</h4>

<p>The place value is interesting to get because while most of our counting increases from left to right, the place value increases from right to left. We can figure out the place value by finding the string length using the function <code>strlen()</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>man strlen
</span><span class='line'>strlen -- find length of string
</span><span class='line'>size_t strlen<span class="o">(</span>const char *s<span class="o">)</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once we know the string&rsquo;s length, we can calculate the place value by subtracting the character&rsquo;s position from left to right from the string&rsquo;s length. We will also need to subtract 1 because the place value is 0 based—the right most place value is 10<sup><strong>0</strong></sup>.</p>

<h2>First Attempt</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="kt">long</span> <span class="nf">cc_stringToNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kt">long</span> <span class="n">returnValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">long</span> <span class="n">stringLength</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">position</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">position</span> <span class="o">&lt;</span> <span class="n">stringLength</span><span class="p">;</span> <span class="n">position</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">characterValue</span> <span class="o">=</span> <span class="n">string</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">-</span> <span class="mi">48</span><span class="p">;</span>
</span><span class='line'>        <span class="kt">long</span> <span class="n">exponent</span> <span class="o">=</span> <span class="p">(</span><span class="n">stringLength</span> <span class="o">-</span> <span class="n">position</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>        <span class="kt">long</span> <span class="n">exponentValue</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">exponent</span><span class="p">);</span>
</span><span class='line'>        <span class="n">returnValue</span> <span class="o">+=</span> <span class="n">characterValue</span> <span class="o">*</span> <span class="n">exponentValue</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">returnValue</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lets see how it works:</p>

<div class="table-figure">
<table>
  <tr>
    <td><code>cc_stringToNumber("1234")</code></td>
    <td><strong>1234</strong></td>
    <td style="color:green">Correct!</td>
  </tr>
  <tr>
    <td><code>cc_stringToNumber("0")</code></td>
    <td><strong>0</strong></td>
    <td style="color:green">Correct!</td>
  </tr>
  <tr>
    <td><code>cc_stringToNumber("Foo")</code></td>
    <td><strong>2893</strong></td>
    <td style="color:Red;">Wrong!</td>
  </tr>
  <tr>
    <td><code>cc_stringToNumber("-42")</code></td>
    <td><strong>-258</strong></td>
    <td style="color:Red;">Wrong!</td>
  </tr>
</table>
</div>


<p>There are 2 issues here. The first is that we&rsquo;re taking the integer value of each character wether they are a number or not. &lsquo;F&rsquo; has an ASCII value of 70 which means we calculate it&rsquo;s value to be 70-48 or 22. &lsquo;o&rsquo; has an ASCII value of 111 so we calculate it&rsquo;s value to be 63. This gives us the overall value: (22 * 10<sup>2</sup>) + (63 * 10<sup>1</sup>) + (63 * 10<sup>0</sup>) = 2893. We need a solution: If we encounter any character &lt; &lsquo;0&rsquo; or > &lsquo;9&rsquo;, we need to return 0 for the value.</p>

<h2>Second Attempt</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="kt">long</span> <span class="nf">cc_stringToNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kt">long</span> <span class="n">returnValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">stringLength</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">position</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">position</span> <span class="o">&lt;</span> <span class="n">stringLength</span><span class="p">;</span> <span class="n">position</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kt">char</span> <span class="n">currentCharacter</span> <span class="o">=</span> <span class="n">string</span><span class="p">[</span><span class="n">position</span><span class="p">];</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">currentCharacter</span> <span class="o">&lt;</span> <span class="sc">&#39;0&#39;</span> <span class="o">||</span> <span class="n">currentCharacter</span> <span class="o">&gt;</span> <span class="sc">&#39;9&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">returnValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>            <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">characterValue</span> <span class="o">=</span> <span class="n">string</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">-</span> <span class="mi">48</span><span class="p">;</span>
</span><span class='line'>            <span class="kt">long</span> <span class="n">exponent</span> <span class="o">=</span> <span class="p">(</span><span class="n">stringLength</span> <span class="o">-</span> <span class="n">position</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>            <span class="kt">long</span> <span class="n">exponentValue</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">exponent</span><span class="p">);</span>
</span><span class='line'>            <span class="n">returnValue</span> <span class="o">+=</span> <span class="n">characterValue</span> <span class="o">*</span> <span class="n">exponentValue</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">returnValue</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lets see how it works:</p>

<div class="table-figure">
<table>
  <tr>
    <td><code>cc_stringToNumber("1234")</code></td>
    <td><strong>1234</strong></td>
    <td style="color:green">Correct!</td>
  </tr>
  <tr>
    <td><code>cc_stringToNumber("0")</code></td>
    <td><strong>0</strong></td>
    <td style="color:green">Correct!</td>
  </tr>
  <tr>
    <td><code>cc_stringToNumber("Foo")</code></td>
    <td><strong>0</strong></td>
    <td style="color:green">Correct!</td>
  </tr>
  <tr>
    <td><code>cc_stringToNumber("-42")</code></td>
    <td><strong>0</strong></td>
    <td style="color:Red;">Wrong!</td>
  </tr>
</table>
</div>


<p>Well, this is an improvement, but we&rsquo;re not handling negative numbers correctly. Negative numbers are hard for a couple of reason. The <code>-</code> sign will move the character positions off by one. The minus sign any other place in a number is also not valid numerical number. It either has to be at the beginning or not there at all.</p>

<p>Our solution is to look at the first character: If it&rsquo;s not a minus sign, we&rsquo;ll run the function as normal. If it is, we&rsquo;ll run the function with a subset of the data</p>

<h2>Final Attempt</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="kt">long</span> <span class="nf">cc_stringToNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kt">long</span> <span class="n">returnValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">stringLength</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">((</span><span class="n">stringLength</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">*</span><span class="n">string</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">returnValue</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="n">cc_positiveStringToNumber</span><span class="p">(</span><span class="o">++</span><span class="n">string</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">returnValue</span> <span class="o">=</span> <span class="n">cc_positiveStringToNumber</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">returnValue</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">long</span> <span class="nf">cc_positiveStringToNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">string</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kt">long</span> <span class="n">returnValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">stringLength</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">position</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">position</span> <span class="o">&lt;</span> <span class="n">stringLength</span><span class="p">;</span> <span class="n">position</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kt">char</span> <span class="n">currentCharacter</span> <span class="o">=</span> <span class="n">string</span><span class="p">[</span><span class="n">position</span><span class="p">];</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">currentCharacter</span> <span class="o">&lt;</span> <span class="sc">&#39;0&#39;</span> <span class="o">||</span> <span class="n">currentCharacter</span> <span class="o">&gt;</span> <span class="sc">&#39;9&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">returnValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>            <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">characterValue</span> <span class="o">=</span> <span class="n">string</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">-</span> <span class="mi">48</span><span class="p">;</span>
</span><span class='line'>            <span class="kt">long</span> <span class="n">exponent</span> <span class="o">=</span> <span class="p">(</span><span class="n">stringLength</span> <span class="o">-</span> <span class="n">position</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>            <span class="kt">long</span> <span class="n">exponentValue</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">exponent</span><span class="p">);</span>
</span><span class='line'>            <span class="n">returnValue</span> <span class="o">+=</span> <span class="n">characterValue</span> <span class="o">*</span> <span class="n">exponentValue</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">returnValue</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lets see how it works:</p>

<div class="table-figure">
<table>
  <tr>
    <td><code>cc_stringToNumber("1234")</code></td>
    <td><strong>1234</strong></td>
    <td style="color:green">Correct!</td>
  </tr>
  <tr>
    <td><code>cc_stringToNumber("0")</code></td>
    <td><strong>0</strong></td>
    <td style="color:green">Correct!</td>
  </tr>
  <tr>
    <td><code>cc_stringToNumber("Foo")</code></td>
    <td><strong>0</strong></td>
    <td style="color:green">Correct!</td>
  </tr>
  <tr>
    <td><code>cc_stringToNumber("-42")</code></td>
    <td><strong>-42</strong></td>
    <td style="color:green">Correct!</td>
  </tr>
</table>
</div>


<p>You&rsquo;ll see I split up the function into two different methods. <code>cc_positiveStringToNumber()</code> assumes that the string is always positive and has our current logic. <code>cc_stringToNumber()</code> has the logic to handle the negative sign. If it encounters a negative sign as the first character (and has at least one more character after it), then it performs <code>cc_positiveStringToNumber()</code> with the minus sign stripped out (++string moves the string pointer forward a character).</p>

<p>This also handles just a minus sign and an empty string.</p>

<h2>In Conclusion</h2>

<p>While it may be fun and educational to implement a standard function, it&rsquo;s worth noting that our method has a few limitations the C Standard Library functions don&rsquo;t have. We don&rsquo;t support the &ldquo;+&rdquo; sign for positive number (though this is an easy feature to add). More importantly, <code>strtol()</code> supports different bases like octal and hexadecimal. Finally, keep in mind that c standard library functions have been tested and optimized for years.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Matt Thomas</span></span>

      




<time class='entry-date' datetime='2011-12-17T22:57:00-05:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>10:57 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/c/'>c</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://codecaffeine.com/blog/2011/12/17/writing-a-string-to-number-function-in-c/" data-via="" data-counturl="http://codecaffeine.com/blog/2011/12/17/writing-a-string-to-number-function-in-c/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/12/08/cheap-and-easy-buttons-for-ios/" title="Previous Post: Cheap & Easy Buttons for iOS Developers">&laquo; Cheap & Easy Buttons for iOS Developers</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/02/11/my-uiviewcontroller-container-phillycocoa-presentation/" title="Next Post: My UIViewController Container PhillyCocoa Presentation">My UIViewController Container PhillyCocoa Presentation &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/17/automating-xcode-builds-and-distribution/">Automating Xcode Builds &amp; Distribution</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/25/surviving-mobile-constraints-ptw-presentation/">Surviving Mobile Constraints - PTW Presentation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/11/my-uiviewcontroller-container-phillycocoa-presentation/">My UIViewController Container PhillyCocoa Presentation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/17/writing-a-string-to-number-function-in-c/">Writing a “String to Number” Function in C</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/08/cheap-and-easy-buttons-for-ios/">Cheap & Easy Buttons for iOS Developers</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Matt Thomas -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'codecaffeine';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://codecaffeine.com/blog/2011/12/17/writing-a-string-to-number-function-in-c/';
        var disqus_url = 'http://codecaffeine.com/blog/2011/12/17/writing-a-string-to-number-function-in-c/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script type="text/javascript">
(function(){
	var script = document.createElement('script');
	script.id = 'wrula';
	script.type = 'text/javascript';
	script.src = '//wrula.codecaffeine.com/js/wrula.js';
	var first_script = document.getElementsByTagName('script')[0];
	first_script.parentNode.insertBefore(script, first_script);
})();
</script>



</body>
</html>
